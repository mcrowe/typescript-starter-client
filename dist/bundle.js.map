{"version":3,"sources":["webpack:///webpack/bootstrap 5b34933eb1cf6462cbbd","webpack:///./src/lib/vector.ts","webpack:///./src/lib/regame.ts","webpack:///./src/main.ts","webpack:///./src/lib/computer-controller.ts","webpack:///./src/lib/key.ts","webpack:///./src/lib/util.ts","webpack:///./src/services/controller.ts","webpack:///./src/services/game.ts","webpack:///./src/services/renderer.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5b34933eb1cf6462cbbd","function make(x, y) {\n  return {x, y}\n}\n\nfunction add(a, b) {\n  return make(a.x + b.x, a.y + b.y)\n}\n\nfunction scale(a, s) {\n  return make(a.x * s, a.y * s)\n}\n\nfunction sub(a, b) {\n  return add(a, scale(b, -1))\n}\n\nfunction len(a) {\n  return Math.sqrt(a.x * a.x + a.y * a.y)\n}\n\nfunction normalize(a) {\n  const l = len(a)\n  if (l == 0) {\n    return make(1, 0)\n  } else {\n    return scale(a, 1/l)\n  }\n}\n\n\nfunction distance(a, b) {\n  return len(sub(b, a))\n}\n\n\n// Ray from a to b\nfunction ray(a, b) {\n  return normalize(sub(b, a))\n}\n\n\nfunction dot(a, b) {\n  return a.x * b.x + a.y * b.y\n}\n\n\n// Rotate vector v by t radians\nfunction rotate(v, t) {\n  const ct = Math.cos(t)\n  const st = Math.sin(t)\n  return make( ct*v.x - st*v.y, st*v.x + ct*v.y )\n}\n\n\n\n// Angle between two normalized vectors with sign\nfunction angle(a, b) {\n  const t = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x)\n\n  if (t < 0) {\n    return 2*Math.PI + t\n  } else {\n    return t\n  }\n}\n\n\nfunction rayFromAngle(t) {\n  return make(Math.cos(t), Math.sin(t))\n}\n\n\n// Rotate from a towards b, by a maximum of 't' radians.\nfunction rotateToward(a, b, t) {\n  const full = angle(a, b)\n\n  if (full == 0 || Math.abs(full) < t) {\n    return b\n  } else {\n    if (full > Math.PI) {\n      return rotate(a, -t)\n    } else {\n      return rotate(a, t)\n    }\n  }\n}\n\n\nfunction interpolate(a, b, t) {\n  const d = sub(b, a)\n  return add(a, scale(d, t))\n}\n\n\nfunction isEqual(a, b) {\n  return Math.abs(a.x - b.x) + Math.abs(a.y - b.y) < 0.000001\n}\n\n\nexport default {\n  make,\n  add,\n  scale,\n  sub,\n  len,\n  normalize,\n  distance,\n  ray,\n  dot,\n  rotate,\n  angle,\n  rayFromAngle,\n  rotateToward,\n  interpolate,\n  isEqual\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/vector.ts","import Vec from './vector'\n\n\nconst CANVAS_WIDTH = 600\n\n\nfunction mod(num,modulus) {\n  return ((num<0) ? Math.abs(modulus) : 0) + (num % modulus);\n}\n\n\n\nfunction drawCircle(ctx, props, camera) {\n  const { x, y, r } = props\n\n  const cx = camera.x - camera.w/2\n  const cy = camera.y - camera.w/2\n\n  const sx = mod(x - cx, 1000) * CANVAS_WIDTH/camera.w\n  const sy = mod(y - cy, 1000) * CANVAS_WIDTH/camera.w\n  const sr = r * CANVAS_WIDTH/camera.w\n\n  ctx.beginPath()\n  ctx.fillStyle = props.color\n  ctx.arc(sx, sy, sr, 0, 2 * Math.PI)\n  ctx.fill()\n}\n\n\nfunction drawText(ctx, props, _camera) {\n  var opts = Object.assign({}, {x: 0, y: 0, message: 'Text', size: 50, color: 'black'}, props)\n  ctx.font = opts.size + 'px \"Comic Sans MS\"'\n  ctx.fillStyle = opts.color\n  ctx.fillText(opts.message, opts.x, opts.y)\n}\n\n\nfunction drawLine(ctx, props, camera) {\n  const { start, end, r, color } = props\n\n  const n = Math.round(Vec.distance(start, end) * 1)\n\n  for (let i = 0; i < n; i++) {\n    const p = Vec.interpolate(start, end, i/n)\n    drawCircle(ctx, {x: p.x, y: p.y, r: r, color: color}, camera)\n  }\n}\n\n\n// TODO: Draw a proper path, for efficiency\nfunction drawPath(ctx, props, camera) {\n  const { path, r, color } = props\n  for (let i = 0; i < path.length - 1; i++) {\n    drawLine(ctx, {start: path[i], end: path[i+1], r: r, color: color}, camera)\n  }\n}\n\n\n// function drawPath(ctx, props, camera) {\n//   ctx.strokeStyle = props.color\n//   ctx.r = props.r\n\n//   const { path } = props\n\n//   ctx.beginPath()\n//   ctx.moveTo(path[0].x, path[0].y)\n//   for (let p of props.path) {\n//     ctx.lineTo(p.x, p.y)\n//   }\n\n//   ctx.stroke()\n// }\n\n\n\nfunction drawModel(ctx, model, camera) {\n  switch (model.type) {\n    case 'circle':\n      drawCircle(ctx, model.props, camera)\n      break\n    case 'text':\n      drawText(ctx, model.props, camera)\n      break\n    case 'path':\n      drawPath(ctx, model.props, camera)\n      break\n    default:\n      throw new Error('Unexpected model type: ' + model.type)\n  }\n}\n\n\nfunction paintScene(ctx, scene) {\n  ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_WIDTH)\n\n  ctx.fillStyle = '#000000'\n\n  for (let model of scene.models) {\n    drawModel(ctx, model, scene.camera)\n  }\n}\n\n\nfunction makeGame(el, update, render, initialState) {\n  const ctx = el.getContext('2d')\n\n  let t = Date.now()\n  const state = initialState\n\n  function loop() {\n    const now = Date.now()\n    const dt = now - t\n    t = now\n\n    update(state, dt)\n\n    const scene = render(state)\n\n    paintScene(ctx, scene)\n\n    requestAnimationFrame(loop)\n  }\n\n  loop()\n}\n\n\n\nfunction makeModel(type, props) {\n  return { type, props }\n}\n\n\nfunction makeCircle(props) {\n  return makeModel('circle', props)\n}\n\n\nfunction makePath(props) {\n  return makeModel('path', props)\n}\n\n\nfunction makeText(props) {\n  return makeModel('text', props)\n}\n\n\nexport default { makeGame, makeCircle, makeText, makePath }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/regame.ts","import Regame from './lib/regame'\nimport Vec from './lib/vector'\nimport Game from './services/game'\nimport Renderer from './services/renderer'\nimport Controller from './services/controller'\n\n\nconst state = Game.getInitialState()\n\n\nconst controller = new Controller()\n\n\ncontroller.onHead(h =>\n  Game.setPlayerHead(state, h)\n)\n\n\ndocument.addEventListener('touchstart', e => {\n  const touch = e.changedTouches[0]\n  // console.log(touch.pageX, touch.pageY)\n  const p = Vec.make(touch.pageX, touch.pageY)\n\n  const h = Vec.ray(Vec.make(300, 300), p)\n\n  Game.setPlayerHead(state, h)\n})\n\n\nRegame.makeGame(document.getElementById('canvas'),\n                Game.update,\n                Renderer.render,\n                state)\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import Util from '../lib/util'\n\n\nclass ComputerController {\n\n  constructor() {\n  }\n\n  onClick(fn) {\n    document.addEventListener('click', e => {\n      fn({x: e.clientX, y: e.clientY})\n    })\n  }\n\n  onMouseMove(fn, period) {\n    const handler = function (e) {\n      fn({x: e.clientX, y: e.clientY})\n    }\n    document.addEventListener('mousemove', Util.throttle(handler, period))\n  }\n\n  onKeyDown(code, fn) {\n    document.addEventListener('keydown', e => {\n      if (e.which == code) {\n        fn()\n      }\n    })\n  }\n\n  onKeyUp(code, fn) {\n    document.addEventListener('keyup', e => {\n      if (e.which == code) {\n        fn()\n      }\n    })\n  }\n}\n\n\nexport default ComputerController\n\n\n// WEBPACK FOOTER //\n// ./src/lib/computer-controller.ts","const CODES = {\n  LEFT: 37,\n  DOWN: 38,\n  RIGHT: 39,\n  UP: 40,\n  SPACE: 32,\n  ENTER: 13,\n  A: 65,\n  S: 87,\n  D: 68,\n  W: 83,\n  R: 82,\n  F: 70,\n  ONE: 49\n}\n\n\nfunction code(name) {\n  const code = CODES[name]\n  if (code) {\n    return code\n  } else {\n    throw new Error('Unrecognized key name: ' + name)\n  }\n}\n\n\nexport default { code }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/key.ts","function throttle(fn, threshhold) {\n  var last, deferTimer;\n\n  return function () {\n    var context = this;\n\n    var now = +new Date,\n        args = arguments;\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n      deferTimer = setTimeout(function () {\n        last = now;\n        fn.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}\n\n\nexport default { throttle }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/util.ts","import Key from '../lib/key'\nimport ComputerController from '../lib/computer-controller'\nimport Vec from '../lib/vector'\n\n\nconst SPACE = Key.code('SPACE')\nconst ENTER = Key.code('ENTER')\nconst CANVAS_MIDDLE = Vec.make(300, 300)\n\n\nclass Controller {\n\n  ctl: ComputerController\n\n  constructor() {\n    this.ctl = new ComputerController()\n  }\n\n  onHead(fn) {\n    this.ctl.onClick(p => {\n      fn(Vec.ray(CANVAS_MIDDLE, p))\n    })\n    return this\n  }\n\n}\n\n\nexport default Controller\n\n\n// WEBPACK FOOTER //\n// ./src/services/controller.ts","import Vec from '../lib/vector'\nimport { State, Point, Snake } from '../types'\n\n\n// function makeSnake(p: Point, h: Point, speed: number, length: number): Snake {\n//   return {\n//     ps: [p, Vec.sub(p, Vec.scale(h, length/2)), Vec.sub(p, Vec.scale(h, length))],\n//     h: h,\n//     speed: speed\n//   }\n// }\n\n\nfunction getInitialState(): State {\n  return {\n    snakes: {\n      1: {\n        speed: 0.10,\n        h: {x: 0, y: 1},\n        ps: [{x: 0, y: 100}, {x: 0, y: 80}, {x: 0, y: 60}, {x: 0, y: 40}, {x: 0, y: 0}]\n      }\n    },\n    camera: {\n      x: 0, y: 0, w: 200\n    },\n    playerId: '1'\n  }\n}\n\n\nfunction gaussian(mu, sigma, x) {\n  const s2 = 2 * sigma * sigma\n  const d = x - mu\n  return Math.exp(-(d * d)/s2)\n}\n\n\nfunction turnSpeedUp(snake: Snake, h: Point): number {\n  const dot = Vec.dot(snake.h, h)\n  const d = Vec.distance(snake.ps[0], snake.ps[1])\n\n\n  const t = gaussian(500 * snake.speed, 5, d)\n\n  const f = 0.6 * (1 - Math.abs(dot)) * t\n\n  console.log(dot, d, t, f)\n\n  return snake.speed * f\n}\n\n\nfunction turnSnake(snake: Snake, h: Point) {\n  snake.speed += turnSpeedUp(snake, h)\n  snake.h = h\n}\n\n\nfunction setPlayerHead(state: State, h: Point) {\n  turnSnake(getPlayerSnake(state), h)\n  const snake = getPlayerSnake(state)\n  const dot = Vec.dot(snake.h, h)\n}\n\n\nfunction getPlayerSnake(state: State) {\n  return state.snakes[state.playerId]\n}\n\n\nfunction focusCamera(state: State) {\n  const snake = getPlayerSnake(state)\n\n  state.camera = {\n    x: snake.ps[0].x % 1000,\n    y: snake.ps[0].y % 1000,\n    w: 200\n  }\n}\n\n\nfunction moveSnake(snake: Snake, dt: number) {\n  const d = snake.speed * dt\n\n  const h = Vec.ray(snake.ps[1], snake.ps[0])\n\n  if (Vec.isEqual(h, snake.h)) {\n    snake.ps[0] = Vec.add(snake.ps[0], Vec.scale(snake.h, d))\n  } else {\n    snake.ps.unshift( Vec.add(snake.ps[0], Vec.scale(snake.h, d)) )\n  }\n\n  const n = snake.ps.length\n  const t = Vec.distance(snake.ps[n - 1], snake.ps[n - 2])\n\n  if (d < t) {\n    const h = Vec.ray(snake.ps[n - 1], snake.ps[n - 2])\n    snake.ps[n - 1] = Vec.add(snake.ps[n - 1], Vec.scale(h, d))\n  } else {\n    const h = Vec.ray(snake.ps[n - 2], snake.ps[n - 3])\n    snake.ps[n - 2] = Vec.add(snake.ps[n - 2], Vec.scale(h, d - t))\n    snake.ps.pop()\n  }\n}\n\n\nfunction dragSnake(snake: Snake, dt: number) {\n  const s = snake.speed\n\n  if (snake.speed > 0.05)\n  snake.speed -= 0.0001 * s * dt + 0.001 * s * s * dt\n  // console.log('s', snake.speed)\n}\n\n\nfunction moveSnakes(state: State, dt: number) {\n  for (let id in state.snakes) {\n    const snake = state.snakes[id]\n    moveSnake(snake, dt)\n    dragSnake(snake, dt)\n  }\n}\n\n\nfunction update(state: State, dt: number) {\n  moveSnakes(state, dt)\n  focusCamera(state)\n}\n\n\nexport default {\n  getInitialState,\n  setPlayerHead,\n  update,\n  moveSnake\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/game.ts","import Regame from '../lib/regame'\nimport Vec from '../lib/vector'\nimport { State, Snake } from '../types'\n\n\nfunction render(state: State) {\n  const models: any[] = []\n\n  // draw a grid\n\n  for (let i = 0; i < 20; i++) {\n    for (let j = 0; j < 20; j++) {\n      models.push( Regame.makeCircle({x: i * 50, y: j * 50, r: 0.5, color: '#999'}))\n    }\n  }\n\n  for (let id in state.snakes) {\n    const snake = state.snakes[id]\n    models.push( Regame.makePath({path: snake.ps, r: 5, color: '#000'}) )\n  }\n\n\n\n  return {\n    models: models,\n    camera: state.camera\n  }\n}\n\n\nexport default { render }\n\n\n// WEBPACK FOOTER //\n// ./src/services/renderer.ts"],"sourceRoot":""}